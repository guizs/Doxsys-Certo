{% extends 'home.html' %}

{% block body %}

<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom" xmlns="http://www.w3.org/1999/html">
  <h1 class="h2"><a style="text-decoration: none" href="{{ url_for('clientes')}}">CLIENTES</a></h1>
  {% if current_user.is_authenticated and current_user.access >= 1 %}
  <form class="input-group w-50 mb-md-1">
    <input name="Search" class="form-control form-control-dark w-50 rounded-0 border-1" type="text" placeholder="Busca em Cliente e Unidade">
  </form>
  {% endif %}
  {% if current_user.is_authenticated and current_user.access >= 3 %}
  <div class="btn-toolbar mb-2 mb-md-0">
    <div class="btn-group me-2">
      <form method="POST" action="{{ url_for('cliadd') }}">
       <button type="submit" class="btn btn-sm btn-outline-primary">Novo Cliente</button>
      </form>
    </div>
  </div>
  {% endif %}
</div>
<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-1 pb-1 mt-1 mb-1">
{% if current_user.access >= 1 %}
<div class="row container-fluid">
    {% if clientes %}
            <div class="row alert px-0 py-0 alert-dark fs-6 fw-bold" style="height:25px padding:25px">
              <div class="col col-1" style="text-align: left">
                Links
              </div>
              <div class="col col-2" style="text-align: left">
                Nome
              </div>
              <div class="col col-2" style="text-align: left">
                Unidade
              </div>
              <div class="col col-3" style="text-align: left">
                Cidade
              </div>
              <div class="col col-1" style="text-align: left">
                UF
              </div>
            </div>
        {% for cliente in clientes.items %}
            <div class="row px-0 py-0 border-bottom fs-6 fw-semibold" style="height:25px padding:25px">
              <div class="col col-1">
                <div class="row">
                  <div class="btn-toolbar">
                    <div class="btn-group me-1">
                      <a href="{{ link_to_pipeline + cliente.linkpipeline|string() }}" target="_blank">
                       <button type="submit" class="btn btn-sm btn-outline-secondary">P</button>
                      </a>
                    </div>
                    <div class="btn-group">
                      <a href="{{ link_to_cadastro + cliente.linkcadastro|string() }}" target="_blank">
                       <button type="submit" class="btn btn-sm btn-outline-secondary">C</button>
                      </a>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col col-2" style="text-align: left">
                <form method="POST" action="{{ url_for('cliedit', cli_id=cliente.idcliente) }}">
                    <a style="text-decoration: none" href="{{ url_for('cliente', cli_id=cliente.idcliente) }}">
                {{ cliente.nomecliente }}
                    </a>
                </form>
              </div>
              <div class="col col-2" style="text-align: left">
                {{ cliente.unidade }}
              </div>
              <div class="col col-3" style="text-align: left">
                {{ cliente.municipio }}
              </div>
              <div class="col col-1" style="text-align: left">
                {{ cliente.estado }}
              </div>
            </div>
        {% endfor %}
      <div class="row">
      <div class="btn-toolbar">
      <div class="btn-group mt-2 me-1">
      {% for page_num in clientes.iter_pages(left_edge=3, right_edge=3, left_current=3, right_current=3) %}
        {% if page_num %}
         {% if clientes.page == page_num %}
          <a class = "btn btn-sm btn-info-secondary fw-bold" href="{{ url_for('clientes', page=page_num)  }}">{{ page_num }}</a>
         {% else %}
          <a class ="btn btn-sm btn-outline-secondary" href="{{ url_for('clientes', page=page_num)  }}">{{ page_num }}</a>
         {% endif %}
        {% else %}
          ...
        {% endif %}
      {%endfor %}
      </div>
      </div>
      </div>
    {% endif %}
</div>
{% else %}
    <p>Insuficient Access Level!</p>
{% endif %}
</div>

{% endblock %}