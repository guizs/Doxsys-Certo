<!doctype html>
<html lang="pt-br">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>DOXSYS - Login</title>

    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">

    <style>
        body {
            background-color: #f0f2f5;
            /* Fundo cinza claro */
        }

        .login-header-logo {
            height: 40px;
            width: auto;
        }

        .time-info {
            font-size: 0.9rem;
            color: #adb5bd;
        }

        /* 2. NAVEGAÇÃO EM PÍLULAS (MAIS MODERNO) */
        .nav-pills .nav-link {
            color: #6c757d;
            background-color: #f8f9fa;
            font-weight: 500;
        }

        .nav-pills .nav-link.active {
            color: #fff;
            background-color: #0d6efd;
            /* Azul primário do Bootstrap */
            box-shadow: 0 4px 8px rgba(13, 110, 253, 0.3);
        }

        /* 3. SUAVIZANDO O CARD (MENOS "QUADRADÃO") */
        .card {
            border-radius: 1rem;
            /* Bordas bem mais arredondadas */
            border: none;
            /* Remove a borda padrão */
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            /* Sombra mais suave e moderna */
        }

        .input-group-text {
            background-color: #f8f9fa;
            border-right: 0;
        }

        .form-control {
            border-left: 0;
        }

        .form-control:focus {
            /* Remove a sombra azul ao focar */
            box-shadow: none;
            border-color: #ced4da;
            border-left: 1px solid #ced4da;
        }

        .input-group:focus-within .input-group-text {
            /* Destaque no ícone ao focar */
            border-color: #86b7fe;
            border-right: 0;
        }

        .input-group:focus-within .form-control {
            border-color: #86b7fe;
            border-left: 0;
        }
    </style>
</head>

<body>

    <header class="navbar navbar-dark bg-dark flex-md-nowrap p-0 shadow login-header">
        <a class="navbar-brand col-md-3 col-lg-2 me-0 px-3" href="#">
            <img class="login-header-logo" src="{{ url_for('static', filename='logo300x58.gif') }}" alt="Logo DOX">
        </a>
        <div class="ms-auto d-flex align-items-center me-3 time-info">
            <span>Week: {{ session["WEEK"] }} | {{ session["HOJE"] }} | {{ session["LOCALTIME"] }}</span>
        </div>
    </header>

    <div class="container">
        <div class="row justify-content-center">
            <div class="col-12 col-md-10 col-lg-7 col-xl-6">
                <div class="mt-4">
                    {% with mensagens = get_flashed_messages(with_categories=True) %}
                    {% if mensagens %}
                    {% for categoria, mensagem in mensagens %}
                    <div class="alert {{ categoria }} alert-dismissible fade show" role="alert">
                        {{ mensagem }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                    {% endfor %}
                    {% endif %}
                    {% endwith %}
                </div>

                <div class="card mt-4 mb-5">
                    <div class="card-body p-4 p-md-5">

                        <ul class="nav nav-pills nav-fill mb-4" id="loginTab" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="login-tab" data-bs-toggle="tab"
                                    data-bs-target="#login-pane" type="button" role="tab" aria-controls="login-pane"
                                    aria-selected="true">
                                    <i class="bi bi-box-arrow-in-right me-2"></i>Login
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="register-tab" data-bs-toggle="tab"
                                    data-bs-target="#register-pane" type="button" role="tab"
                                    aria-controls="register-pane" aria-selected="false">
                                    <i class="bi bi-person-plus-fill me-2"></i>Cadastre-se
                                </button>
                            </li>
                        </ul>

                        <div class="tab-content" id="loginTabContent">

                            <div class="tab-pane fade show active" id="login-pane" role="tabpanel"
                                aria-labelledby="login-tab">
                                <form method="POST" action="">
                                    {{ form_login.hidden_tag() }}
                                    <h3 class="text-center mb-4 fw-light">Acessar sua conta</h3>
                                    <fieldset>
                                        <div class="input-group mb-3">
                                            <span class="input-group-text"><i class="bi bi-envelope-fill"></i></span>
                                            {% if form_login.email.errors %}
                                            {{ form_login.email(class="form-control is-invalid", placeholder="Seu
                                            e-mail") }}
                                            <div class="invalid-feedback">
                                                {% for erro in form_login.email.errors %}{{ erro }}{% endfor %}
                                            </div>
                                            {% else %}
                                            {{ form_login.email(class="form-control", placeholder="Seu e-mail") }}
                                            {% endif %}
                                        </div>

                                        <div class="input-group mb-3">
                                            <span class="input-group-text"><i class="bi bi-lock-fill"></i></span>
                                            {% if form_login.senha.errors %}
                                            {{ form_login.senha(class="form-control is-invalid", placeholder="Sua
                                            senha") }}
                                            <div class="invalid-feedback">
                                                {% for erro in form_login.senha.errors %}{{ erro }}{% endfor %}
                                            </div>
                                            {% else %}
                                            {{ form_login.senha(class="form-control", placeholder="Sua senha") }}
                                            {% endif %}
                                        </div>

                                        <div class="form-group form-check mb-3">
                                            {{ form_login.lembrar_dados(class="form-check-input") }}
                                            {{ form_login.lembrar_dados.label(class="form-check-label") }}
                                        </div>
                                    </fieldset>
                                    {{ form_login.botao_submit_login(class="btn btn-primary w-100 mt-2 py-2") }}
                                </form>
                            </div>

                            <div class="tab-pane fade" id="register-pane" role="tabpanel"
                                aria-labelledby="register-tab">
                                <form method="POST" action="">
                                    {{ form_criarconta.hidden_tag() }}
                                    <h3 class="text-center mb-4 fw-light">Criar nova conta</h3>
                                    <fieldset>
                                        <div class="input-group mb-3">
                                            <span class="input-group-text"><i class="bi bi-person-fill"></i></span>
                                            {% if form_criarconta.username.errors %}
                                            {{ form_criarconta.username(class="form-control is-invalid",
                                            placeholder="Nome de usuário") }}
                                            <div class="invalid-feedback">
                                                {% for erro in form_criarconta.username.errors %}{{ erro }}{% endfor %}
                                            </div>
                                            {% else %}
                                            {{ form_criarconta.username(class="form-control", placeholder="Nome de
                                            usuário") }}
                                            {% endif %}
                                        </div>

                                        <div class="input-group mb-3">
                                            <span class="input-group-text"><i class="bi bi-envelope-fill"></i></span>
                                            {% if form_criarconta.email.errors %}
                                            {{ form_criarconta.email(class="form-control is-invalid", placeholder="Seu
                                            e-mail") }}
                                            <div class="invalid-feedback">
                                                {% for erro in form_criarconta.email.errors %}{{ erro }}{% endfor %}
                                            </div>
                                            {% else %}
                                            {{ form_criarconta.email(class="form-control", placeholder="Seu e-mail") }}
                                            {% endif %}
                                        </div>

                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="input-group mb-3">
                                                    <span class="input-group-text"><i
                                                            class="bi bi-phone-fill"></i></span>
                                                    {{ form_criarconta.mobile(class="form-control",
                                                    placeholder="Celular") }}
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="input-group mb-3">
                                                    <span class="input-group-text"><i
                                                            class="bi bi-telephone-fill"></i></span>
                                                    {{ form_criarconta.phone(class="form-control", placeholder="Telefone
                                                    Fixo (Opcional)") }}
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="input-group mb-3">
                                                    <span class="input-group-text"><i class="bi bi-key-fill"></i></span>
                                                    {% if form_criarconta.senha.errors %}
                                                    {{ form_criarconta.senha(class="form-control is-invalid",
                                                    placeholder="Senha") }}
                                                    <div class="invalid-feedback">
                                                        {% for erro in form_criarconta.senha.errors %}{{ erro }}{%
                                                        endfor %}
                                                    </div>
                                                    {% else %}
                                                    {{ form_criarconta.senha(class="form-control", placeholder="Senha")
                                                    }}
                                                    {% endif %}
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="input-group mb-3">
                                                    <span class="input-group-text"><i class="bi bi-key-fill"></i></span>
                                                    {% if form_criarconta.confirmacao_senha.errors %}
                                                    {{ form_criarconta.confirmacao_senha(class="form-control
                                                    is-invalid", placeholder="Confirmar senha") }}
                                                    <div class="invalid-feedback">
                                                        {% for erro in form_criarconta.confirmacao_senha.errors %}{{
                                                        erro }}{% endfor %}
                                                    </div>
                                                    {% else %}
                                                    {{ form_criarconta.confirmacao_senha(class="form-control",
                                                    placeholder="Confirmar senha") }}
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </div>
                                    </fieldset>
                                    {{ form_criarconta.botao_submit_criarconta(class="btn btn-primary w-100 mt-2 py-2")
                                    }}
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>